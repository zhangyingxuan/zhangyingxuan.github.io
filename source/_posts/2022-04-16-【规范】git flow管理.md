---
title: 2022-10-10-git flow管理规范
description: git flow管理
categories:
  - 规范
tags:
  - git flow
  - git
---

https://govindustry.coding.net/api/qci-plugin/meta?key=codingcorp%3Atsf_deploy&version=latest&codingProjectName=hrss

https://govindustry.coding.net/api/qci-plugin/meta?key=codingcorp%3Atsf_deploy&version=latest&codingProjectName=hrss-web-government-enterprise-through

## 一、git flow 介绍

1、master（主分支）
主分支，存放经过测试，已经完全稳定的代码，即其放的代码是可随时直接上生产使用的代码。主分支不允许提交代码，release 分支经过充分测试后，打 tag 版本号并合并到 master 分支

2、develop（开发分支）
开发分支，一开始从 master 分支中分离出来，用于开发者存放基本稳定代码

3、feature（功能分支）
功能分支，每次开发新功能时候从 develop 中 fork 出来一个 feature 分支，分支名可以采用 feature/\*的形式命名，如：feature/需求编号-日期，feature/31124-190618，开发完成合并到 develop 分支，不用时可以将其删除

4、release（预发分支）
预发分支，发布正式版本之前，需要一个预发布的版本进行测试，预发分支一般从从 develop 拉出，release 分支版本命名规范：由 4 个数字段表示，大版本. Release 版本.Hotfix 版本.YYmmdd，如 release/2.2.0.190403，预发布结束以后，打 tag 并合并进 Develop 和 Master 分支

5、hotfix（修补 bug 分支）
修补 bug 分支，若遇到生产出现 bug，需要紧急修复，确定对应的 release 版本后，从 master 拉出一个 hotfix 分支，修改完成测试后打 tag 合并到 develop 和 master 分支，如分支名 hotfix/2.2.0.190411。

## 二、git 分支创建与合并

创建分支

如创建 feature/31124-190618 分支，从 develop 上，创建并切换 feature 分支：

$ git checkout develop #切换到 dev 分支
$ git checkout -b feature/31124-190618 #创建并切换到 feature/31124-190618 分支

把创建的分支 feature 推送远程仓库：

$ git push -u origin feature/31124-190618
合并分支：

如把 feature/31124-190618 分支合并到 develop 分支

先切换分支： $ git checkout develop

再合并分支：$ git merge --no-ff feature/31124-190618

最终推送到远程仓库：$ git push origin develop

## 三、举例说明

假如开发一个“评论“”功能

1、 克隆现有仓库
$ git clone http://git.uwscloud.com/uws/uws-data.git

2、创建并切换到 feature/31124-190618 分支

git checkout develop #切换到 dev 分支
git checkout -b feature/31124-190618 #创建并切换到 feature/31124-190618 分支

git push -u origin feature/31124-190618 #把创建的分支推送到远程仓库
3、开发过程中，定期把 dev 代码合并到 feature 分支，feature 分支始终保持最新代码

git checkout feature/31124-190618 #切换到 feature/31124-190618 分支

git merge --no-ff develop #把 dev 代码合并大 feature
4、开发完成提交

git add .

git commit -m 'finish discuss feature'
5、开发完成，提交测试，从 develop 中 fork 出 release，并把 feature 合并到 release，在 release 上测试并修改 bug

git checkout develop #切换到 dev 分支
git checkout -b release/2.2.0-190618 #创建并切换到 release/2.2.0-190618 分支

git merge --no-ff feature-31124-190618 #把开发完成的 feature 分支合并到 release/2.2.0-190618
6、直接上线测试通过的 release 版本，上线后把将 release 合并到 develop 和 master

7、保持 release 本地最新
git pull release/2.2.0-190618

- release 合并到 develop 并 push 到远程
  git checkout develop
  git pull develop
  git merge --no-ff release/2.2.0-190618
  git push
- release 合并到 master 并 push 到远程
  git checkout master
  git pull master
  git merge --no-ff release/2.2.0-190618
  git push

9、对合并生成的新节点，打一个 tag

对合并生成的新节点，做一个标签
git tag -a release/2.2.0-190618
git push --tags #push 到远程

#没用可以删除 release
git branch -d release/2.2.0-190618
git push origin --delete release/2.2.0-190618
10、线上出问题，创建一个修补 bug 分支

git checkout master
git checkout -b hotfix/2.2.0-190618
11、bug 解决后，hotfix 合并到 develop 和 master 分支

- hotfix 合并到 develop 并 push 到远程
  git checkout develop
  git pull develop
  git merge --no-ff hotfix/2.2.0-190618
  git push

- hotfix 合并到 master 并 push 到远程
  git checkout master
  git pull master
  git merge --no-ff hotfix/2.2.0-190618
  git push

# 打 tag

git tag -a hotfix/2.2.0-190618 #在当前分支上打一个 tag
git tag -a hotfix/2.2.0-190618 be6fabcd #在当前分支的某个提交上打一个 tag
git push --tags #将当前分支及所有新打的 tag 推送远程仓库
