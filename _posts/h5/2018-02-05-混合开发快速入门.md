---
title: 2018-01-28-vue-cli爬坑之路2
description: 近期项目中涉及到H5版本框架转型，使用vue-cli脚手架 结合axios、mint-ui进行项目迁移。这里记录迁移过程以及其中遇到的坑，留备日后所需。`本文主要讲解开发过程中的问题收集`
categories:
 - vue
tags:
 - vue
 - 前端
---

>

<!-- more -->
# 课程内容

# 混合开发快速入门

# 环境搭建

> 开发工具
>
> 1、编辑器： [webstorm](http://www.jetbrains.com/webstorm/)
>
> 2、版本管理：git
>
> 3、运行环境：node.js
>
> 4、构建环境：webpack
>
> 5、 vue-cli安装

## 一、编辑器安装

* 进入[webstorm](http://www.jetbrains.com/webstorm/) 官网，下载最新版本并安装。
* 破解方法请百度搜索

## 二、git安装

* 1、下载最新版本[git客户端](https://git-scm.com/downloads)
* 2、设置git配置
```
$ git config user.email "yyy@xxx.com"
$ git config user.name yyy
$ git config --global credential.helper store
$ git config --global core.autocrlf false
```

* 若报错`SSL certificate problem: unable to get local issuer certificate` 则执行
```
git config --global http.sslVerify false
```
* PS: 若需要代理设置
```$xslt
git config --global https.proxy http://127.0.0.1:1080
git config --global https.proxy https://127.0.0.1:1080
// 取消代理
git config --global --unset http.proxy
git config --global --unset https.proxy
```

## 三、node.js安装
* 下载最新 node.js [官网地址](https://nodejs.org/zh-cn/download/) 并安装

* 按照 [cnpm设置教程](http://npm.taobao.org/) 设置淘宝镜像
```
npm install -g cnpm --registry=https://registry.npm.taobao.org
```

* 代理设置（在公司环境下需要设置代理）
```
npm config set proxy=http://172.17.18.80:8080
cnpm config set proxy=http://172.17.18.80:8080
npm config set http-proxy=http://127.0.0.1:8087
npm config set https-proxy=http://127.0.0.1:8087
// 取消代理
npm config delete proxy
cnpm config delete proxy
```

## 四、webpack安装
```
npm install -g webpack
```

## 五、vue-cli安装
* 执行`npm install vue-cli -g `全局安装

# 项目创建

## 一、生成项目

首先需要在命令行中进入到项目目录，然后输入：
```
vue init webpack Vue-Project
```

其中 webpack 是模板名称，可以到 vue.js 的 GitHub 上查看更多的模板https://github.com/vuejs-templates

Vue-Project 是自定义的项目名称，命令执行之后，会在当前目录生成一个以该名称命名的项目文件夹

<img src="img/class2.png">

配置完成后，可以看到目录下多出了一个项目文件夹，里面就是 vue-cli 创建的一个基于 webpack 的 vue.js 项目

然后进入项目目录（cd Vue-Project），使用 cnpm 安装依赖

```
cnpm install
```

然后启动项目

```
npm run dev
```

如果浏览器打开之后，没有加载出页面，有可能是本地的 8080 端口被占用，需要修改一下配置文件 config>index.js

<img src="img/class2.png">

建议将端口号改为不常用的端口。另外我还将 build 的路径前缀修改为 ' ./ '（原本为 ' / '），是因为打包之后，外部引入 js 和 css 文件时，如果路径以 ' / ' 开头，在本地是无法找到对应文件的（服务器上没问题）。所以如果需要在本地打开打包后的文件，就得修改文件路径。

# 路由配置

## 一、官方路由

对于大多数单页面应用，都推荐使用官方支持的 vue-router 库。更多细节可以看 [vue-router](https://router.vuejs.org/) 文档。

## 二、从零开始简单的路由

如果只需要非常简单的路由而不需要引入整个路由库，可以动态渲染一个页面级的组件像这样：
```
const NotFound = { template: '<p>Page not found</p>' }
const Home = { template: '<p>home page</p>' }
const About = { template: '<p>about page</p>' }

const routes = {
  '/': Home,
  '/about': About
}

new Vue({
  el: '#app',
  data: {
    currentRoute: window.location.pathname
  },
  computed: {
    ViewComponent () {
      return routes[this.currentRoute] || NotFound
    }
  },
  render (h) { return h(this.ViewComponent) }
})
```

结合 HTML5 History API，你可以建立一个非常基本但功能齐全的客户端路由器。可以直接看[实例应用](https://github.com/chrisvfritz/vue-2.0-simple-routing-example)

## 三、整合第三方路由

如果有非常喜欢的第三方路由，如 Page.js 或者 Director，整合很简单。这有个用了 Page.js 的[复杂示例](https://github.com/chrisvfritz/vue-2.0-simple-routing-example/tree/pagejs)。

# 打包发布

一、打包上线

自己的项目文件都需要放到 src 文件夹下

项目开发完成之后，可以输入 npm run build 来进行打包工作

```
npm run build
```

打包完成后，会生成 dist 文件夹，如果已经修改了文件路径，可以直接打开本地文件查看

项目上线时，只需要将 dist 文件夹放到服务器就行了。


# 试题

1、白屏的原因
2、vue CLI的特点
3、在vue-router中，设置默认界面的关键字是（ ）
1、实践题：使用vue-cli脚手架，创建一个项目名为`myFirstVueTest`的项目，并打包为dist文件夹。

