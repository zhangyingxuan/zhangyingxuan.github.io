---
title: 2025-10-11 微信小程序OCR服务
description:
categories:
  - 小程序
tags:
  - OCR
---

## 1. 结论

使用微信服务市场，“微信 OCR 识别”服务“纯前端”调用，每日 100 次免费调用额度（前期进件量不大能够覆盖日常使用场景）

## 2. 代码示例

- 步骤

1. 选择相册/相机
2. 上传 CDN（图片太大 256kb 限制，上传到微信 CDN 进行压缩）
3. 调用服务市场的 OcrAllInOne 服务

```js
// 1：身份证；2：银行卡；3：行驶证；4：驾驶证；7：营业执照；8：通用OCR ; 10: 车牌识别

  handleImageUploadClick() {
    const selft = this;
    wx.chooseMedia({
      count: 1,
      mediaType: ["image"],
      sourceType: ["album", "camera"],
      maxDuration: 30,
      camera: "back",
      async success(res) {
        let ocr_type = 1;

        let img_url = new wx.serviceMarket.CDN({
          type: "filePath",
          filePath: res.tempFiles[0].tempFilePath,
        });
        wx.serviceMarket
          .invokeService({
            service: "wx79ac3de8be320b71",
            api: "OcrAllInOne",
            data: {
              // 用 CDN 方法标记要上传并转换成 HTTP URL 的文件
              data_type: 3,
              img_url,
              ocr_type,
            },
          })
          .then((res) => {
            console.log("invokeService success", res);
            wx.showModal({
              title: "cost",
              content: res + "",
            });
          })
          .catch((err) => {
            // 错误码107，原因为没有可用资源次数
            console.error("invokeService fail", err);
            wx.showModal({
              title: "fail",
              content: err + "",
            });
          });
      },
    });
  },
```

## 3. 问题

1. 返回错误码 103，原因：未开通 OCR 服务权限
2. 返回错误码 107，原因：调用次数超限

## 4. 参考文献

- [微信小程序 OCR 服务](https://fuwu.weixin.qq.com/service/detail/000ce4cec24ca026d37900ed551415)
