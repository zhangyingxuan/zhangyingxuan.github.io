---
title: 2022-03-08-docker部署
description: docker部署
categories:
 - docker
tags:
 - docker
 - openresty
 - nginx
---

>

<!-- more -->
## openresty镜像制作

### 1. Dockerfile
```javascript
FROM centos:7.6.1810
 
MAINTAINER openresty1.15.8.2 <827516789@qq.com>
 
RUN   yum install -y yum-utils && yum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo && yum clean  all &&  yum install -y openresty  


RUN useradd appuser &&  mkdir -p /mnt/data/logs/nginx/ && mkdir -p /home/appuser/openresty/nginx/logs/ &&  mkdir -p /home/appuser/www-prod/
ADD ./www-prod/ /home/appuser/www-prod/
ADD ./html /usr/local/openresty/nginx/html/
ADD ./conf/ /usr/local/openresty/nginx/conf/
RUN chown -R appuser.appuser /usr/local/openresty/ && chown -R appuser.appuser /home/appuser/
#RUN yum -y install epel-release  && yum install -y yum-utils && yum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo && yum install -y openresty && yum clean all && chmod +x start.sh && chmod +x auto-reload.sh


#ADD nginx.conf /usr/local/openresty/nginx/conf/nginx.conf
EXPOSE 8004
CMD /usr/local/openresty/nginx/sbin/nginx -g 'daemon off;' -c   /usr/local/openresty/nginx/conf/nginx.conf
```

### 2. 构建镜像
```javascript
docker build -t openresty:1.15.8.2 -f ./Dockerfile .
```